# Status do Projeto - StratBet API

## ğŸ“… AtualizaÃ§Ã£o: 27/02/2026

### âœ… O que foi feito hoje

1. **Estrutura Backend**: Criada aplicaÃ§Ã£o NestJS com mÃ³dulos de Coletor, Jogos e Snapshots.
2. **Schema do Banco**: Definido schema Prisma com ~150 colunas cobrindo todos os dados da API FutAlerta.
3. **Banco de Dados na VPS**: Criado banco `stratbet_pi` no Coolify e estruturado via scripts SQL (`criar-tabelas.ts`).
4. **LÃ³gica de Coleta (Upsert)**: Implementada lÃ³gica avanÃ§ada que atualiza snapshots do mesmo minuto (mantendo dados sempre atuais) e detecta mudanÃ§as de turno (1T/2T).
5. **Git/GitHub**: CÃ³digo sincronizado com o repositÃ³rio `lopestech-hub/stratbet-api` usando autenticaÃ§Ã£o via Token.
6. **Logs**: Sistema de logs detalhado com emojis e nomes de times para monitoramento fÃ¡cil.

### ğŸ§ª O que foi testado

- **Coleta Local**: O script rodou localmente e salvou dados reais no banco da VPS com sucesso.
- **ConexÃ£o API**: Endpoint da FutAlerta verificado e mapeamento de chaves (com hÃ­fens) confirmado.
- **Deploy Coolify**: Imagem Docker funcional rodando em ambiente de produÃ§Ã£o (Debian Slim).

### ğŸš€ Status do Deploy - âœ… CONCLUÃDO

1. **CorreÃ§Ã£o Prisma**: MigraÃ§Ã£o para `node:20-slim` e inclusÃ£o da pasta `.prisma` resolveu o erro de inicializaÃ§Ã£o.
2. **ResiliÃªncia NPM**: Configurado `fetch-retries` para superar instabilidades de rede no build.
3. **Runtime**: Logs confirmando conexÃ£o com o banco e coleta ativa em tempo real.

### ğŸ“… PrÃ³ximos Passos

1. **Dashboard de AnÃ¡lise**: Planejamento do frontend para visualizaÃ§Ã£o dos PI em tempo real.
2. **Alertas**: Implementar sistema de notificaÃ§Ãµes para jogos com alta pressÃ£o.

---
**Status Geral:** ğŸŸ¢ TOTALMENTE OPERACIONAL (Backend rodando 24h na VPS)
